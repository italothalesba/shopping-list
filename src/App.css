/* src/App.css - Responsividade Aprimorada */

/* Global Styles and Root Font Size */
:root {
  font-size: 16px; /* Base font size */
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 1rem; /* Relative padding */
  background-color: #f0f2f5;
  color: #333;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.container {
  max-width: 56.25rem; /* 900px / 16 = 56.25rem */
  margin: 2rem auto; /* Relative margin */
  padding: 1.5rem; /* Relative padding */
  background-color: #ffffff;
  border-radius: 0.75rem; /* 12px */
  box-shadow: 0 0.625rem 1.875rem rgba(0, 0, 0, 0.08); /* 10px 30px */
}

.header {
  text-align: center;
  color: #2c3e50;
  margin-bottom: 2.5rem; /* 40px */
  font-size: 2.2rem;
  font-weight: 700;
}

/* Mode Toggle Buttons */
.mode-toggle-container {
  display: flex;
  flex-wrap: wrap; /* Allow wrapping */
  justify-content: center;
  gap: 1rem; /* Relative gap */
  margin-bottom: 1.875rem; /* 30px */
  padding: 0.625rem; /* 10px */
  background-color: #f8f9fa;
  border-radius: 0.5rem; /* 8px */
  box-shadow: inset 0 0.0625rem 0.1875rem rgba(0,0,0,0.08); /* 1px 3px */
}

.mode-button {
  background-color: #e9ecef;
  color: #495057;
  border: none;
  border-radius: 0.375rem; /* 6px */
  padding: 0.75rem 1.25rem; /* 12px 20px */
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.3s ease;
  flex-grow: 1;
  text-align: center;
  min-width: 8rem; /* 128px - min width for small screens */
  max-width: 15.625rem; /* 250px */
}

.mode-button.active-mode {
  background-color: #007bff;
  color: white;
  box-shadow: 0 0.25rem 0.75rem rgba(0, 123, 255, 0.2); /* 4px 12px */
}

.mode-button:hover:not(.active-mode) {
  background-color: #d1d9e2;
  color: #34495e;
}

/* Form for Adding New Item (Planning Mode) */
.add-item-form {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem; /* Relative gap */
  margin-bottom: 1.875rem; /* 30px */
  padding: 1.5rem; /* 25px */
  background-color: #e9f5ff;
  border-radius: 0.625rem; /* 10px */
  box-shadow: 0 0.125rem 0.625rem rgba(0, 0, 0, 0.05); /* 2px 10px */
  align-items: center;
  position: relative;
}

.item-name-input,
.quantity-input,
.unit-select,
.priority-select {
  padding: 0.75rem 0.9375rem; /* 12px 15px */
  border: 1px solid #cce0ff;
  border-radius: 0.5rem; /* 8px */
  font-size: 1rem;
  flex: 1; /* Default flex behaviour */
  min-width: 6rem; /* Min-width for each input to ensure visibility */
}

.item-name-input {
  flex-grow: 3;
  min-width: 10rem; /* 160px */
}

.quantity-input {
  flex-grow: 0.8;
  min-width: 4rem; /* 64px */
  text-align: right;
}

.unit-select {
  flex-grow: 1;
  min-width: 6rem; /* 96px */
  background-color: #ffffff;
  cursor: pointer;
}

.priority-select {
  flex-grow: 1;
  min-width: 7.5rem; /* 120px */
  background-color: #ffffff;
  cursor: pointer;
}

.add-button {
  background-color: #007bff;
  color: white;
  padding: 0.75rem 1.25rem; /* 12px 20px */
  border: none;
  border-radius: 0.5rem; /* 8px */
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: background-color 0.3s ease;
  flex: 1;
  min-width: 9.375rem; /* 150px */
}

.add-button:hover {
  background-color: #0056b3;
}

.add-item-form-error {
  position: absolute;
  bottom: -1.5rem; /* Adjusted for better visibility */
  left: 1rem; /* 16px */
  width: calc(100% - 2rem); /* Full width minus padding */
  font-size: 0.85rem;
  color: #dc3545;
  z-index: 10;
}


/* List Container (Both Modes) */
.list-container {
  display: flex;
  flex-direction: column;
  gap: 1.5rem; /* Relative gap */
}

.empty-list-message {
  text-align: center;
  padding: 2.5rem; /* 40px */
  background-color: #f8f9fa;
  border-radius: 0.625rem; /* 10px */
  color: #6c757d;
  font-size: 1.1rem;
  box-shadow: 0 0.0625rem 0.3125rem rgba(0,0,0,0.05); /* 1px 5px */
}

/* Item Card (Base Style) */
.item-card {
  background-color: #ffffff;
  border: 1px solid #e0e6ed;
  border-radius: 0.625rem; /* 10px */
  padding: 1.25rem 1.5625rem; /* 20px 25px */
  box-shadow: 0 0.25rem 0.9375rem rgba(0, 0, 0, 0.06); /* 4px 15px */
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.item-card:hover {
  transform: translateY(-0.1875rem); /* -3px */
  box-shadow: 0 0.375rem 1.25rem rgba(0, 0, 0, 0.1); /* 6px 20px */
}

.item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 0.9375rem; /* 15px */
  margin-bottom: 0.9375rem; /* 15px */
  border-bottom: 1px solid #e9ecef;
  flex-wrap: wrap;
  gap: 0.625rem; /* 10px */
}

.item-name {
  margin: 0;
  font-size: 1.5rem;
  color: #34495e;
  display: flex;
  align-items: center;
  flex-grow: 1;
  min-width: 50%; /* Allow wrapping */
}

.item-quantity-display {
  font-size: 0.8em; /* Relative to item-name font-size */
  font-weight: normal;
  color: #555;
  margin-left: 0.5rem; /* 8px */
  white-space: nowrap;
}

.priority-tag {
  font-size: 0.85rem;
  padding: 0.3125rem 0.75rem; /* 5px 12px */
  border-radius: 1.25rem; /* 20px */
  color: white;
  font-weight: 700;
  margin-left: 0.9375rem; /* 15px */
  display: inline-block;
  white-space: nowrap;
}

/* Priority Colors */
.priority-alta { background-color: #dc3545; }
.priority-media { background-color: #ffc107; color: #333; }
.priority-baixa { background-color: #28a745; }

.item-actions {
  display: flex;
  gap: 0.625rem; /* 10px */
}

.action-button {
  background-color: #6c757d;
  color: white;
  border: none;
  border-radius: 0.3125rem; /* 5px */
  width: 2.375rem; /* 38px */
  height: 2.375rem; /* 38px */
  cursor: pointer;
  font-size: 1.1rem;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 0.3s ease;
}

.action-button:hover {
  background-color: #5a6268;
}

.edit-button {
  background-color: #17a2b8;
}
.edit-button:hover {
  background-color: #138496;
}

.delete-button {
  background-color: #dc3545;
}
.delete-button:hover {
  background-color: #c82333;
}

/* Edit Mode for Item (Planning Mode) */
.item-edit-mode-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.625rem; /* 10px */
  align-items: center;
  flex-grow: 1;
  position: relative;
}
.edit-input, .edit-select {
  padding: 0.5rem 0.625rem; /* 8px 10px */
  border: 1px solid #b3d9ff;
  border-radius: 0.3125rem; /* 5px */
  font-size: 1.1rem;
  background-color: #ffffff;
}

.item-name-edit {
  flex-basis: 100%; /* Full width */
  order: 1;
}

.quantity-unit-edit-group {
  display: flex;
  gap: 0.5rem; /* 8px */
  flex-grow: 1;
  order: 2;
}
.quantity-edit-input {
  flex-basis: 3.75rem; /* 60px */
  text-align: right;
  min-width: 3.75rem; /* 60px */
  max-width: 6.25rem; /* 100px */
}
.unit-edit-select {
  flex-grow: 1;
  min-width: 5rem; /* 80px */
}
.priority-edit-select {
  flex-grow: 1;
  order: 3;
  min-width: 6.25rem; /* 100px */
}
.edit-actions {
  display: flex;
  gap: 0.625rem; /* 10px */
  order: 4;
  margin-left: auto;
  white-space: nowrap;
}

.save-button, .cancel-button {
  padding: 0.5rem 0.9375rem; /* 8px 15px */
  border: none;
  border-radius: 0.3125rem; /* 5px */
  cursor: pointer;
  font-size: 0.9rem;
  transition: background-color 0.3s ease;
}

.save-button {
  background-color: #28a745;
  color: white;
}
.save-button:hover {
  background-color: #218838;
}

.cancel-button {
  background-color: #6c757d;
  color: white;
}
.cancel-button:hover {
  background-color: #5a6268;
}

.edit-error-message {
  position: static;
  flex-basis: 100%;
  order: 2.5;
  margin-top: -0.3125rem; /* -5px */
}

/* Market Prices Section (Planning Mode) */
.market-prices h4 {
  color: #495057;
  margin-top: 0.9375rem; /* 15px */
  margin-bottom: 0.625rem; /* 10px */
  border-bottom: 1px dashed #e9ecef;
  padding-bottom: 0.5rem; /* 8px */
}

.no-prices-text {
  font-style: italic;
  color: #7f8c8d;
  margin-left: 0.625rem; /* 10px */
}

.market-prices ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.market-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0; /* 8px */
  border-bottom: 1px dotted #f0f0f0;
  color: #555;
  font-size: 0.95rem;
}
.market-item:last-child {
  border-bottom: none;
}

.market-details {
  flex-grow: 1;
}

.price-value {
  font-weight: bold;
  color: #007bff;
}

.delete-market-price-button {
  background-color: #dc3545;
  color: white;
  border: none;
  border-radius: 0.3125rem; /* 5px */
  padding: 0.3125rem 0.625rem; /* 5px 10px */
  cursor: pointer;
  font-size: 0.75rem;
  transition: background-color 0.3s ease;
}
.delete-market-price-button:hover {
  background-color: #c82333;
}

/* Cheapest Market Info (Planning Mode) */
.cheapest-market-info {
  margin-top: 1.25rem; /* 20px */
  padding: 0.75rem 1.125rem; /* 12px 18px */
  background-color: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
  border-radius: 0.5rem; /* 8px */
  font-weight: bold;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.cheapest-market-name {
  color: #0d3615;
}

.cheapest-price-value {
  color: #006400;
}

.best-price-indicator {
  font-size: 1.4rem;
  margin-left: 0.625rem; /* 10px */
  color: #218838;
}

/* Add Market Price Form (Planning Mode) */
.add-market-price-form {
  display: flex;
  flex-wrap: wrap;
  gap: 0.625rem; /* 10px */
  margin-top: 1.25rem; /* 20px */
  padding-top: 0.9375rem; /* 15px */
  border-top: 1px solid #eee;
  position: relative;
}

.market-input,
.price-input {
  flex-grow: 1;
  padding: 0.625rem 0.75rem; /* 10px 12px */
  border: 1px solid #ddd;
  border-radius: 0.375rem; /* 6px */
  font-size: 0.95rem;
  min-width: 6.25rem; /* 100px */
}

.add-price-button {
  background-color: #28a745;
  color: white;
  border: none;
  border-radius: 0.375rem; /* 6px */
  padding: 0.625rem 0.9375rem; /* 10px 15px */
  cursor: pointer;
  font-size: 0.95rem;
  font-weight: 600;
  transition: background-color 0.3s ease;
  min-width: 6.25rem; /* 100px */
}
.add-price-button:hover {
  background-color: #218838;
}

/* Error Handling */
.input-error {
  border-color: #dc3545 !important;
  box-shadow: 0 0 0 0.1rem rgba(220,53,69,.25) !important;
}

.input-error-message {
  color: #dc3545;
  font-size: 0.85rem;
  margin-top: 0.3125rem; /* 5px */
  position: absolute;
  bottom: -1.25rem; /* -20px */
  left: 0;
  width: 100%;
  text-align: left;
}
/* Adjust specific for top add item form error */
.add-item-form .input-error-message {
  bottom: -1.875rem; /* -30px to clear inputs above */
  left: 1rem;
  width: calc(100% - 2rem);
  position: absolute;
  z-index: 10;
}
.edit-error-message {
  position: static;
  margin-top: 0.3125rem; /* 5px */
}


/* Market Mode Specific Styles */
.market-mode-view {
  padding-top: 1.25rem; /* 20px */
}

.current-market-selection {
  display: flex;
  flex-wrap: wrap;
  gap: 0.625rem; /* 10px */
  padding: 1.25rem; /* 20px */
  background-color: #e6f7ff;
  border: 1px solid #b3e0ff;
  border-radius: 0.625rem; /* 10px */
  margin-bottom: 1.5625rem; /* 25px */
  align-items: center;
}

.current-market-input {
  flex-grow: 1;
  padding: 0.75rem 0.9375rem; /* 12px 15px */
  border: 1px solid #a3d0ff;
  border-radius: 0.5rem; /* 8px */
  font-size: 1rem;
  min-width: 11.25rem; /* 180px */
}

.set-market-button,
.clear-market-button {
  padding: 0.75rem 1.25rem; /* 12px 20px */
  border: none;
  border-radius: 0.5rem; /* 8px */
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: background-color 0.3s ease;
  white-space: nowrap;
}

.set-market-button {
  background-color: #007bff;
  color: white;
}
.set-market-button:hover {
  background-color: #0056b3;
}

.clear-market-button {
  background-color: #6c757d;
  color: white;
}
.clear-market-button:hover {
  background-color: #5a6268;
}

.market-mode-instruction {
  text-align: center;
  padding: 1.25rem; /* 20px */
  background-color: #f8f9fa;
  border-radius: 0.5rem; /* 8px */
  color: #6c757d;
  font-size: 1rem;
  margin-top: -0.625rem; /* -10px */
  margin-bottom: 1.5625rem; /* 25px */
  border: 1px solid #e9ecef;
}

.market-mode-info {
  text-align: center;
  margin-bottom: 1.875rem; /* 30px */
  padding: 1.25rem; /* 20px */
  background-color: #d1ecf1;
  border: 1px solid #bee5eb;
  border-radius: 0.625rem; /* 10px */
}

.market-mode-info p {
  margin: 0 0 0.625rem 0; /* 10px */
  font-size: 1.1rem;
  color: #0c5460;
}

.market-mode-total {
  font-size: 2.5rem;
  color: #28a745;
  margin: 0;
  font-weight: 700;
}
.market-mode-total span {
  font-weight: 900;
}

/* Styling for item cards in Market Mode */
.market-mode-card {
  border-left: 0.5rem solid #007bff; /* 8px */
  padding: 0.9375rem 1.25rem; /* 15px 20px */
}

.market-mode-header {
  justify-content: flex-start;
  gap: 0.9375rem; /* 15px */
  align-items: center;
}

.item-cart-checkbox {
  width: 1.5625rem; /* 25px */
  height: 1.5625rem; /* 25px */
  min-width: 1.5625rem;
  min-height: 1.5625rem;
  cursor: pointer;
  transform: scale(1.1); /* Slightly smaller scale than previous 1.3 to not overpower layout on mobile */
  accent-color: #28a745;
}

.item-name-market-mode {
  font-size: 1.4rem;
  flex-grow: 1;
  margin-right: 0.9375rem; /* 15px */
  color: #34495e;
}

.item-quantity-display-market {
  font-size: 0.7em; /* Relative to item-name-market-mode font-size */
  font-weight: normal;
  color: #777;
  margin-left: 0.3125rem; /* 5px */
}

.market-mode-priority {
  font-size: 0.9rem;
  padding: 0.25rem 0.625rem; /* 4px 10px */
  white-space: nowrap;
}

.current-market-price-edit {
  margin-top: 0.9375rem; /* 15px */
  padding: 0.625rem 0; /* 10px */
  border-bottom: 1px dashed #e9ecef;
  border-top: 1px dashed #e9ecef;
  margin-bottom: 0.9375rem; /* 15px */
  position: relative;
}
.current-market-price-edit label.current-market-label {
  display: flex;
  align-items: center;
  gap: 0.625rem; /* 10px */
  font-weight: 600;
  color: #495057;
  margin-bottom: 0.5rem; /* 8px */
  flex-wrap: wrap;
}
.current-market-price-edit .market-name-highlight {
  color: #0056b3;
}

.market-mode-price-input {
  padding: 0.5rem 0.625rem; /* 8px 10px */
  border: 1px solid #b3d9ff;
  border-radius: 0.375rem; /* 6px */
  font-size: 1rem;
  flex-grow: 1;
  min-width: 5rem; /* 80px */
  text-align: right;
}

.price-error-market-mode {
  position: static;
  margin-top: 0.3125rem; /* 5px */
  text-align: right;
  width: auto;
  display: block;
}

.no-market-selected-text {
  font-style: italic;
  color: #888;
  text-align: center;
  padding: 0.9375rem; /* 15px */
  background-color: #f8f9fa;
  border-radius: 0.5rem; /* 8px */
}

.other-market-prices-comparison {
  margin-top: 0.9375rem; /* 15px */
  background-color: #f8f9fa;
  padding: 0.9375rem; /* 15px */
  border-radius: 0.5rem; /* 8px */
  border: 1px solid #e9ecef;
}

.other-market-prices-comparison h5 {
  margin-top: 0;
  color: #0056b3;
  border-bottom: 1px dotted #cce0ff;
  padding-bottom: 0.3125rem; /* 5px */
  margin-bottom: 0.625rem; /* 10px */
}

.other-market-prices-comparison ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.other-market-prices-comparison li {
  display: flex;
  justify-content: space-between;
  padding: 0.3125rem 0; /* 5px */
  color: #555;
  font-size: 0.9rem;
}
.other-market-prices-comparison li:not(:last-child) {
  border-bottom: 1px dotted #e9ecef;
}
.no-other-markets-text {
  font-style: italic;
  color: #7f8c8d;
  margin-left: 0;
  text-align: center;
  padding: 0.625rem 0; /* 10px */
}


/* --- Responsive Adjustments --- */

/* For screens smaller than 768px */
@media (max-width: 48rem) { /* 768px / 16 = 48rem */
  .container {
      margin: 1rem; /* 16px */
      padding: 1rem; /* 16px */
  }

  .header {
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
  }

  /* Adjust button sizing in mode toggle */
  .mode-toggle-container {
      flex-direction: column;
      gap: 0.75rem; /* 12px */
  }
  .mode-button {
      max-width: 100%;
      font-size: 0.95rem;
      padding: 0.75rem 1rem;
  }

  /* Adjust form layout on small screens */
  .add-item-form, .current-market-selection {
      flex-direction: column;
      align-items: stretch; /* Stretch children to fill container */
      gap: 0.75rem; /* Smaller gap */
  }

  .item-name-input, .quantity-input, .unit-select, .priority-select,
  .add-button, .current-market-input, .set-market-button, .clear-market-button {
      width: 100%;
      min-width: unset; /* Remove explicit min-width */
      font-size: 0.95rem;
      padding: 0.75rem; /* Unified padding */
  }
  /* Specific order for form fields */
  .item-name-input { order: 1; }
  .quantity-input { order: 2; }
  .unit-select { order: 3; }
  .priority-select { order: 4; }
  .add-button { order: 5; }
  .add-item-form-error { order: 6; }


  /* Item Header in Cards */
  .item-header {
      flex-direction: column; /* Stack elements */
      align-items: flex-start; /* Align left */
      gap: 0.5rem;
  }
  .item-name {
      font-size: 1.3rem;
      width: 100%;
      justify-content: space-between; /* Space out name and quantity-display */
      align-items: flex-start;
      flex-wrap: wrap; /* allow name/qty to wrap */
  }
  .item-quantity-display {
      flex-basis: 100%; /* Push quantity below name if it gets too long */
      margin-left: 0;
      margin-top: 0.3125rem; /* 5px */
      font-size: 0.85em;
  }
  .priority-tag {
      margin-left: 0;
      margin-top: 0.625rem; /* 10px */
      font-size: 0.8rem;
  }
  .item-actions {
      width: 100%;
      justify-content: flex-end; /* Push action buttons to right */
      gap: 0.75rem; /* 12px */
  }

  /* Edit Mode within cards */
  .item-edit-mode-container {
      flex-direction: column;
      align-items: stretch; /* Stretch all items */
      gap: 0.75rem;
  }
  .item-name-edit, .quantity-unit-edit-group, .priority-edit-select, .edit-actions {
      width: 100%;
      flex-basis: auto; /* Reset flex basis */
      margin-left: 0 !important;
      margin-right: 0 !important;
      max-width: unset;
      font-size: 1rem; /* Ensure inputs are readable */
      padding: 0.625rem;
  }
  .quantity-unit-edit-group {
      flex-direction: row; /* Keep these side-by-side if possible */
      gap: 0.5rem;
  }
  .save-button, .cancel-button {
      flex-grow: 1;
      width: unset;
      font-size: 0.9rem;
  }

  /* Market mode specific styles adjustments */
  .market-mode-info h2 {
      font-size: 2rem;
  }
  .market-mode-header {
      flex-wrap: wrap;
      flex-direction: row; /* Horizontal flow for checkmark, name, priority */
      justify-content: flex-start;
      align-items: center;
  }
  .item-cart-checkbox {
      order: -1;
      margin-right: 0.625rem; /* 10px */
  }
  .item-name-market-mode {
      font-size: 1.2rem;
      margin-right: 0;
      margin-bottom: 0;
      flex-basis: auto;
      width: auto;
      flex-grow: 1;
  }
  .market-mode-priority {
      margin-left: auto;
      order: 1; /* Place after item name */
      align-self: center;
  }

  .current-market-price-edit label.current-market-label {
      flex-direction: column; /* Stack label elements */
      align-items: flex-start;
      gap: 0.5rem;
  }
  .market-mode-price-input {
      width: 100%;
      flex-grow: 1; /* Allow price input to take full width */
      margin-top: 0.5rem;
      margin-left: 0;
      font-size: 0.95rem;
      padding: 0.625rem;
  }

  .other-market-prices-comparison h5 {
      font-size: 1rem;
  }
  .other-market-prices-comparison li {
      font-size: 0.85rem;
  }
}

/* For very small screens (e.g., ~320px width) */
@media (max-width: 25rem) { /* 400px / 16 = 25rem */
  .header {
      font-size: 1.5rem;
  }
  .add-item-form {
      padding: 1rem;
      gap: 0.5rem;
  }
  .item-name-input, .quantity-input, .unit-select, .priority-select, .add-button {
      padding: 0.6rem; /* Slightly smaller for tighter fit */
  }
  .item-name {
      font-size: 1.1rem;
  }
  .priority-tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.6rem;
  }
  .item-cart-checkbox {
      width: 1.25rem;
      height: 1.25rem;
      min-width: 1.25rem;
      min-height: 1.25rem;
  }
  .market-mode-info h2 {
      font-size: 1.8rem;
  }
  .market-mode-total {
      font-size: 2rem;
  }
  .item-edit-mode-container .save-button,
  .item-edit-mode-container .cancel-button {
      flex-basis: calc(50% - 0.25rem); /* Adjust for smaller gap */
  }
  .current-market-selection {
      padding: 1rem;
      gap: 0.5rem;
  }
  .current-market-input, .set-market-button, .clear-market-button {
      padding: 0.6rem;
      font-size: 0.9rem;
  }
}

/* Base styles for forms/inputs, often good to declare upfront to be overridden by more specific media queries */
input[type="text"],
input[type="number"],
select {
  width: 100%;
  box-sizing: border-box; /* Include padding/border in element's total width/height */
}