/* src/App.css - Responsividade Aprimorada com Subcategorias e Busca */

/* Global Styles and Root Font Size */
:root {
  font-size: 16px; /* Base font size */
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 1rem; /* Relative padding */
  background-color: #f0f2f5; /* Light gray background */
  color: #333;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.container {
  max-width: 56.25rem; /* 900px */
  margin: 2rem auto; /* Relative margin */
  padding: 1.5rem; /* Relative padding */
  background-color: #ffffff;
  border-radius: 0.75rem; /* 12px */
  box-shadow: 0 0.625rem 1.875rem rgba(0, 0, 0, 0.08); /* 10px 30px */
}

.header {
  text-align: center;
  color: #2c3e50; /* Darker blue-gray */
  margin-bottom: 2.5rem; /* 40px */
  font-size: 2.2rem;
  font-weight: 700;
}

/* Mode Toggle Buttons */
.mode-toggle-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1rem;
  padding: 0.625rem;
  background-color: #f8f9fa;
  border-radius: 0.5rem;
  box-shadow: inset 0 0.0625rem 0.1875rem rgba(0,0,0,0.08);
}

.mode-button {
  background-color: #e9ecef;
  color: #495057;
  border: none;
  border-radius: 0.375rem;
  padding: 0.75rem 1.25rem;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.3s ease;
  flex-grow: 1;
  text-align: center;
  min-width: 8rem; /* 128px - min width for small screens */
  max-width: 15.625rem; /* 250px */
}

.mode-button.active-mode {
  background-color: #007bff;
  color: white;
  box-shadow: 0 0.25rem 0.75rem rgba(0, 123, 255, 0.2);
}

.mode-button:hover:not(.active-mode) {
  background-color: #d1d9e2;
  color: #34495e;
}

/* NEW: Filter Controls Container (for Search and Subcategory Filter) */
.filter-controls-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 1.875rem; /* 30px */
  padding-bottom: 0.625rem; /* 10px */
  border-bottom: 1px solid #e9ecef;
}

.search-input {
  flex-grow: 2; /* Allow search input to take more space */
  min-width: 12rem; /* Minimum width */
  padding: 0.75rem 0.9375rem;
  border: 1px solid #a3d0ff;
  border-radius: 0.5rem;
  font-size: 1rem;
  box-sizing: border-box;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
.search-input::placeholder {
  color: #6c757d;
}
.search-input:focus {
  border-color: #007bff;
  box-shadow: 0 0 0 0.15rem rgba(0, 123, 255, 0.25);
  outline: none;
}

.subcategory-filter-select { /* NEW: Style for subcategory filter dropdown */
  flex-grow: 1; /* Allow dropdown to grow */
  min-width: 8rem; /* Minimum width */
  padding: 0.75rem 0.9375rem;
  border: 1px solid #a3d0ff;
  border-radius: 0.5rem;
  font-size: 1rem;
  background-color: #ffffff;
  cursor: pointer;
  box-sizing: border-box;
}


/* Form for Adding New Item (Planning Mode) */
.add-item-form {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 1.875rem;
  padding: 1.5rem;
  background-color: #e9f5ff;
  border-radius: 0.625rem;
  box-shadow: 0 0.125rem 0.625rem rgba(0, 0, 0, 0.05);
  align-items: center;
  position: relative;
}

.item-name-input,
.quantity-input,
.unit-select,
.subcategory-input,
.priority-select {
  padding: 0.75rem 0.9375rem;
  border: 1px solid #cce0ff;
  border-radius: 0.5rem;
  font-size: 1rem;
  flex: 1;
  min-width: 6rem;
}

.item-name-input {
  flex-grow: 3;
  min-width: 150px;
}
.quantity-input {
  flex-grow: 0.8;
  min-width: 60px;
  text-align: right;
}
.unit-select {
  flex-grow: 1;
  min-width: 90px;
  background-color: #ffffff;
  cursor: pointer;
}
.subcategory-input {
  flex-grow: 1.5;
  min-width: 150px;
  order: 4;
}
.priority-select {
  flex-grow: 1;
  min-width: 120px;
  background-color: #ffffff;
  cursor: pointer;
  order: 5;
}
.add-button {
  background-color: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: background-color 0.3s ease;
  flex: 1;
  min-width: 150px;
  order: 6;
}
.add-button:hover {
  background-color: #0056b3;
}

.add-item-form-error {
  position: absolute;
  bottom: -1.875rem;
  left: 1rem;
  width: calc(100% - 2rem);
  font-size: 0.9rem;
  color: #dc3545;
  z-index: 10;
}


/* List Container (Both Modes) */
.list-container {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.empty-list-message {
  text-align: center;
  padding: 2.5rem;
  background-color: #f8f9fa;
  border-radius: 0.625rem;
  color: #6c757d;
  font-size: 1.1rem;
  box-shadow: 0 0.0625rem 0.3125rem rgba(0,0,0,0.05);
}

/* Item Card (Base Style) */
.item-card {
  background-color: #ffffff;
  border: 1px solid #e0e6ed;
  border-radius: 0.625rem;
  padding: 1.25rem 1.5625rem;
  box-shadow: 0 0.25rem 0.9375rem rgba(0, 0, 0, 0.06);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.item-card:hover {
  transform: translateY(-0.1875rem);
  box-shadow: 0 0.375rem 1.25rem rgba(0, 0, 0, 0.1);
}

.item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 0.9375rem;
  margin-bottom: 0.9375rem;
  border-bottom: 1px solid #e9ecef;
  flex-wrap: wrap;
  gap: 0.625rem;
}

.item-name {
  margin: 0;
  font-size: 1.5rem;
  color: #34495e;
  display: flex;
  align-items: center;
  flex-grow: 1;
  min-width: 50%;
  flex-wrap: wrap;
}

.item-quantity-display {
  font-size: 0.8em;
  font-weight: normal;
  color: #555;
  margin-left: 0.5rem;
  white-space: nowrap;
}

.item-subcategory {
  font-size: 0.7em;
  color: #777;
  background-color: #f0f8ff;
  padding: 0.2em 0.5em;
  border-radius: 0.3em;
  margin-left: 0.5rem;
  white-space: nowrap;
  border: 1px solid #d0e7ff;
}

.priority-tag {
  font-size: 0.85rem;
  padding: 0.3125rem 0.75rem;
  border-radius: 1.25rem;
  color: white;
  font-weight: 700;
  margin-left: 0.9375rem;
  display: inline-block;
  white-space: nowrap;
}

/* Priority Colors */
.priority-alta { background-color: #dc3545; }
.priority-media { background-color: #ffc107; color: #333; }
.priority-baixa { background-color: #28a745; }

.item-actions {
  display: flex;
  gap: 0.625rem;
}

.action-button {
  background-color: #6c757d;
  color: white;
  border: none;
  border-radius: 0.3125rem;
  width: 2.375rem;
  height: 2.375rem;
  cursor: pointer;
  font-size: 1.1rem;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 0.3s ease;
}

.action-button:hover {
  background-color: #5a6268;
}

.edit-button {
  background-color: #17a2b8;
}
.edit-button:hover {
  background-color: #138496;
}

.delete-button {
  background-color: #dc3545;
}
.delete-button:hover {
  background-color: #c82333;
}

/* Edit Mode for Item (Planning Mode) */
.item-edit-mode-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.625rem;
  align-items: center;
  flex-grow: 1;
  position: relative;
}
.edit-input, .edit-select {
  padding: 0.5rem 0.625rem;
  border: 1px solid #b3d9ff;
  border-radius: 0.3125rem;
  font-size: 1.1rem;
  background-color: #ffffff;
}

.item-name-edit {
  flex-basis: 100%;
  order: 1;
}

.quantity-unit-edit-group {
  display: flex;
  gap: 0.5rem;
  flex-grow: 1;
  order: 2;
}
.quantity-edit-input {
  flex-basis: 3.75rem;
  text-align: right;
  min-width: 3.75rem;
  max-width: 6.25rem;
}
.unit-edit-select {
  flex-grow: 1;
  min-width: 5rem;
}
.subcategory-edit-input {
  flex-grow: 1;
  order: 2.5;
  min-width: 100px;
}
.priority-edit-select {
  flex-grow: 1;
  order: 3;
  min-width: 6.25rem;
}
.edit-actions {
  display: flex;
  gap: 0.625rem;
  order: 4;
  margin-left: auto;
  white-space: nowrap;
}

.save-button, .cancel-button {
  padding: 0.5rem 0.9375rem;
  border: none;
  border-radius: 0.3125rem;
  cursor: pointer;
  font-size: 0.9rem;
  transition: background-color 0.3s ease;
}

.save-button {
  background-color: #28a745;
  color: white;
}
.save-button:hover {
  background-color: #218838;
}

.cancel-button {
  background-color: #6c757d;
  color: white;
}
.cancel-button:hover {
  background-color: #5a6268;
}

.edit-error-message {
  position: static;
  flex-basis: 100%;
  order: 2.5;
  margin-top: -0.3125rem;
}

/* Market Prices Section (Planning Mode) */
.market-prices h4 {
  color: #495057;
  margin-top: 0.9375rem;
  margin-bottom: 0.625rem;
  border-bottom: 1px dashed #e9ecef;
  padding-bottom: 0.5rem;
}

.no-prices-text {
  font-style: italic;
  color: #7f8c8d;
  margin-left: 0.625rem;
}

.market-prices ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.market-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px dotted #f0f0f0;
  color: #555;
  font-size: 0.95rem;
}
.market-item:last-child {
  border-bottom: none;
}

.market-details {
  flex-grow: 1;
}

.price-value {
  font-weight: bold;
  color: #007bff;
}

.delete-market-price-button {
  background-color: #dc3545;
  color: white;
  border: none;
  border-radius: 0.3125rem;
  padding: 0.3125rem 0.625rem;
  cursor: pointer;
  font-size: 0.75rem;
  transition: background-color 0.3s ease;
}
.delete-market-price-button:hover {
  background-color: #c82333;
}

/* Cheapest Market Info (Planning Mode) */
.cheapest-market-info {
  margin-top: 1.25rem;
  padding: 0.75rem 1.125rem;
  background-color: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
  border-radius: 0.5rem;
  font-weight: bold;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.cheapest-market-name {
  color: #0d3615;
}

.cheapest-price-value {
  color: #006400;
}

.best-price-indicator {
  font-size: 1.4rem;
  margin-left: 0.625rem;
  color: #218838;
}

/* Add Market Price Form (Planning Mode) */
.add-market-price-form {
  display: flex;
  flex-wrap: wrap;
  gap: 0.625rem;
  margin-top: 1.25rem;
  padding-top: 0.9375rem;
  border-top: 1px solid #eee;
  position: relative;
}

.market-input,
.price-input {
  flex-grow: 1;
  padding: 0.625rem 0.75rem;
  border: 1px solid #ddd;
  border-radius: 0.375rem;
  font-size: 0.95rem;
  min-width: 6.25rem;
}

.add-price-button {
  background-color: #28a745;
  color: white;
  border: none;
  border-radius: 0.375rem;
  padding: 0.625rem 0.9375rem;
  cursor: pointer;
  font-size: 0.95rem;
  font-weight: 600;
  transition: background-color 0.3s ease;
  min-width: 6.25rem;
}
.add-price-button:hover {
  background-color: #218838;
}

/* Error Handling */
.input-error {
  border-color: #dc3545 !important;
  box-shadow: 0 0 0 0.1rem rgba(220,53,69,.25) !important;
}

.input-error-message {
  color: #dc3545;
  font-size: 0.85rem;
  margin-top: 0.3125rem;
  position: absolute;
  bottom: -1.25rem;
  left: 0;
  width: 100%;
  text-align: left;
}
/* Adjust specific for top add item form error */
.add-item-form .input-error-message {
  bottom: -1.875rem;
  left: 1rem;
  width: calc(100% - 2rem);
  position: absolute;
  z-index: 10;
}
.edit-error-message {
  position: static;
  margin-top: 0.3125rem;
}


/* Market Mode Specific Styles */
.market-mode-view {
  padding-top: 1.25rem;
}

.current-market-selection {
  display: flex;
  flex-wrap: wrap;
  gap: 0.625rem;
  padding: 1.25rem;
  background-color: #e6f7ff;
  border: 1px solid #b3e0ff;
  border-radius: 0.625rem;
  margin-bottom: 1.5625rem;
  align-items: center;
}

.current-market-input {
  flex-grow: 1;
  padding: 0.75rem 0.9375rem;
  border: 1px solid #a3d0ff;
  border-radius: 0.5rem;
  font-size: 1rem;
  min-width: 11.25rem;
}

.set-market-button,
.clear-market-button {
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  transition: background-color 0.3s ease;
  white-space: nowrap;
}

.set-market-button {
  background-color: #007bff;
  color: white;
}
.set-market-button:hover {
  background-color: #0056b3;
}

.clear-market-button {
  background-color: #6c757d;
  color: white;
}
.clear-market-button:hover {
  background-color: #5a6268;
}

.market-mode-instruction {
  text-align: center;
  padding: 1.25rem;
  background-color: #f8f9fa;
  border-radius: 0.5rem;
  color: #6c757d;
  font-size: 1rem;
  margin-top: -0.625rem;
  margin-bottom: 1.5625rem;
  border: 1px solid #e9ecef;
}

.market-mode-info {
  text-align: center;
  margin-bottom: 1.875rem;
  padding: 1.25rem;
  background-color: #d1ecf1;
  border: 1px solid #bee5eb;
  border-radius: 0.625rem;
}

.market-mode-info p {
  margin: 0 0 0.625rem 0;
  font-size: 1.1rem;
  color: #0c5460;
}

.market-mode-total {
  font-size: 2.5rem;
  color: #28a745;
  margin: 0;
  font-weight: 700;
}
.market-mode-total span {
  font-weight: 900;
}

/* Styling for item cards in Market Mode */
.market-mode-card {
  border-left: 0.5rem solid #007bff;
  padding: 0.9375rem 1.25rem;
}

.market-mode-header {
  justify-content: flex-start;
  gap: 0.9375rem;
  align-items: center;
}

.item-cart-checkbox {
  width: 1.5625rem;
  height: 1.5625rem;
  min-width: 1.5625rem;
  min-height: 1.5625rem;
  cursor: pointer;
  transform: scale(1.1);
  accent-color: #28a745;
}

.item-name-market-mode {
  font-size: 1.4rem;
  flex-grow: 1;
  margin-right: 0.9375rem;
  color: #34495e;
  flex-wrap: wrap;
}

.item-quantity-display-market {
  font-size: 0.7em;
  font-weight: normal;
  color: #777;
  margin-left: 0.3125rem;
}

.item-subcategory-market {
  font-size: 0.65em;
  color: #8a6d3b;
  background-color: #fcf8e3;
  padding: 0.2em 0.5em;
  border-radius: 0.3em;
  margin-left: 0.3125rem;
  white-space: nowrap;
  border: 1px solid #faebcc;
}

.market-mode-priority {
  font-size: 0.9rem;
  padding: 0.25rem 0.625rem;
  white-space: nowrap;
}

.current-market-price-edit {
  margin-top: 0.9375rem;
  padding: 0.625rem 0;
  border-bottom: 1px dashed #e9ecef;
  border-top: 1px dashed #e9ecef;
  margin-bottom: 0.9375rem;
  position: relative;
}
.current-market-price-edit label.current-market-label {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  font-weight: 600;
  color: #495057;
  margin-bottom: 0.5rem;
  flex-wrap: wrap;
}
.current-market-price-edit .market-name-highlight {
  color: #0056b3;
}

.market-mode-price-input {
  padding: 0.5rem 0.625rem;
  border: 1px solid #b3d9ff;
  border-radius: 0.375rem;
  font-size: 1rem;
  flex-grow: 1;
  min-width: 5rem;
  text-align: right;
}

.price-error-market-mode {
  position: static;
  margin-top: 0.3125rem;
  text-align: right;
  width: auto;
  display: block;
}

.no-market-selected-text {
  font-style: italic;
  color: #888;
  text-align: center;
  padding: 0.9375rem;
  background-color: #f8f9fa;
  border-radius: 0.5rem;
}

.other-market-prices-comparison {
  margin-top: 0.9375rem;
  background-color: #f8f9fa;
  padding: 0.9375rem;
  border-radius: 0.5rem;
  border: 1px solid #e9ecef;
}

.other-market-prices-comparison h5 {
  margin-top: 0;
  color: #0056b3;
  border-bottom: 1px dotted #cce0ff;
  padding-bottom: 0.3125rem;
  margin-bottom: 0.625rem;
}

.other-market-prices-comparison ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.other-market-prices-comparison li {
  display: flex;
  justify-content: space-between;
  padding: 0.3125rem 0;
  color: #555;
  font-size: 0.9rem;
}
.other-market-prices-comparison li:not(:last-child) {
  border-bottom: 1px dotted #e9ecef;
}
.no-other-markets-text {
  font-style: italic;
  color: #7f8c8d;
  margin-left: 0;
  text-align: center;
  padding: 0.625rem 0;
}


/* --- Responsive Adjustments --- */

/* For screens smaller than 768px */
@media (max-width: 48rem) {
  .container {
      margin: 1rem;
      padding: 1rem;
  }
  .header {
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
  }

  .mode-toggle-container {
      flex-direction: column;
      gap: 0.75rem;
  }
  .mode-button {
      max-width: 100%;
      font-size: 0.95rem;
      padding: 0.75rem 1rem;
  }

  /* Adjust filter controls layout */
  .filter-controls-container {
      flex-direction: column;
      gap: 0.75rem;
  }
  .search-input, .subcategory-filter-select {
      width: 100%;
      min-width: unset;
      font-size: 0.95rem;
      padding: 0.75rem;
  }

  .add-item-form, .current-market-selection {
      flex-direction: column;
      align-items: stretch;
      gap: 0.75rem;
  }

  /* Redefine order and width for Add Item Form elements on small screens */
  .item-name-input { order: 1; width: 100%; min-width: unset; flex-grow: 1; }
  .quantity-input { order: 2; width: 100%; min-width: unset; flex-grow: 1; }
  .unit-select { order: 3; width: 100%; min-width: unset; flex-grow: 1; }
  .subcategory-input { order: 4; width: 100%; min-width: unset; flex-grow: 1; }
  .priority-select { order: 5; width: 100%; min-width: unset; flex-grow: 1; }
  .add-button { order: 6; width: 100%; min-width: unset; flex-grow: 1; }
  .add-item-form-error { order: 7; width: calc(100% - 2rem); left: 1rem; }

  /* Item Header in Cards */
  .item-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.5rem;
  }
  .item-name {
      font-size: 1.3rem;
      width: 100%;
      justify-content: space-between;
      align-items: flex-start;
      flex-wrap: wrap;
  }
  .item-quantity-display, .item-subcategory {
      flex-basis: auto;
      margin-left: 0.5rem;
      margin-top: 0;
      font-size: 0.85em;
  }
  .item-subcategory {
       order: 1;
  }
  .item-quantity-display {
      order: 2;
  }
  .priority-tag {
      margin-left: 0;
      margin-top: 0.625rem;
      font-size: 0.8rem;
  }
  .item-actions {
      width: 100%;
      justify-content: flex-end;
      gap: 0.75rem;
  }

  /* Edit Mode within cards */
  .item-edit-mode-container {
      flex-direction: column;
      align-items: stretch;
      gap: 0.75rem;
  }
  .item-name-edit, .quantity-unit-edit-group, .subcategory-edit-input, .priority-edit-select, .edit-actions {
      width: 100%;
      flex-basis: auto;
      margin-left: 0 !important;
      margin-right: 0 !important;
      max-width: unset;
      font-size: 1rem;
      padding: 0.625rem;
  }
  .quantity-unit-edit-group {
      flex-direction: row;
      gap: 0.5rem;
  }
  .save-button, .cancel-button {
      flex-grow: 1;
      width: unset;
      font-size: 0.9rem;
  }

  /* Market mode specific styles adjustments */
  .market-mode-info h2 {
      font-size: 2rem;
  }
  .market-mode-header {
      flex-wrap: wrap;
      flex-direction: row;
      justify-content: flex-start;
      align-items: center;
  }
  .item-cart-checkbox {
      order: -1;
      margin-right: 0.625rem;
  }
  .item-name-market-mode {
      font-size: 1.2rem;
      margin-right: 0;
      margin-bottom: 0;
      flex-basis: auto;
      width: auto;
      flex-grow: 1;
  }
  .item-quantity-display-market {
      font-size: 0.6em;
      margin-left: 0.2rem;
  }
  .item-subcategory-market {
      font-size: 0.6em;
      margin-left: 0.2rem;
      margin-top: 0;
  }
  .market-mode-priority {
      margin-left: auto;
      order: 1;
      align-self: center;
  }

  .current-market-price-edit label.current-market-label {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.5rem;
  }
  .market-mode-price-input {
      width: 100%;
      flex-grow: 1;
      margin-top: 0.5rem;
      margin-left: 0;
      font-size: 0.95rem;
      padding: 0.625rem;
  }

  .other-market-prices-comparison h5 {
      font-size: 1rem;
  }
  .other-market-prices-comparison li {
      font-size: 0.85rem;
  }
}

/* For very small screens (e.g., ~320px width) */
@media (max-width: 25rem) {
  .header {
      font-size: 1.5rem;
  }
  .add-item-form {
      padding: 1rem;
      gap: 0.5rem;
  }
  .item-name-input, .quantity-input, .unit-select, .subcategory-input, .priority-select, .add-button {
      padding: 0.6rem;
  }
  .item-name {
      font-size: 1.1rem;
  }
  .priority-tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.6rem;
  }
  .item-cart-checkbox {
      width: 1.25rem;
      height: 1.25rem;
      min-width: 1.25rem;
      min-height: 1.25rem;
  }
  .market-mode-info h2 {
      font-size: 1.8rem;
  }
  .market-mode-total {
      font-size: 2rem;
  }
  .item-edit-mode-container .save-button,
  .item-edit-mode-container .cancel-button {
      flex-basis: calc(50% - 0.25rem);
  }
  .current-market-selection {
      padding: 1rem;
      gap: 0.5rem;
  }
  .current-market-input, .set-market-button, .clear-market-button {
      padding: 0.6rem;
      font-size: 0.9rem;
  }
  .item-name-market-mode {
      flex-basis: 100%;
      font-size: 1.1rem;
  }
  .item-quantity-display-market, .item-subcategory-market {
      font-size: 0.7em;
      flex-basis: auto;
  }
  .item-subcategory-market {
      margin-left: 0;
      margin-top: 5px;
  }
}